<script>
  // ====== THÔNG TIN CỦA BẠN ======
  const BANK_CODE = "VCB";
  const ACCOUNT_NO = "9337533795";
  const ACCOUNT_NAME = "NGUYEN BA SANG";
  const ADD_INFO = "Thanh toan";
  // ===============================

  const baseUrl =
    `https://img.vietqr.io/image/${BANK_CODE}-${ACCOUNT_NO}-compact2.png`;

  const params = new URLSearchParams({
    addInfo: ADD_INFO,
    accountName: ACCOUNT_NAME,
    t: Date.now() // chống cache
  });

  const qrUrl = baseUrl + "?" + params.toString();
  document.getElementById("qr").src = qrUrl;

  // ====== HÀM TẢI QR ======
  async function downloadQR() {
    try {
      const res = await fetch(qrUrl);
      const blob = await res.blob();

      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "qr-chuyen-khoan.png";
      document.body.appendChild(a);
      a.click();

      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    } catch (e) {
      alert("Không tải được QR. Vui lòng giữ ảnh để lưu.");
    }
  }
</script>
